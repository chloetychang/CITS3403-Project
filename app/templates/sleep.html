{% extends "base.html" %}
{% block title %}Sleep{% endblock %}

{% block head %}
<style>
  .sidebar svg,
  .sidebar img {
    width: 6rem !important;
    height: 6rem !important;
  }
</style>
{% endblock %}

{% block content %}
<div class="relative flex flex-col items-center justify-center min-h-screen px-4 sm:px-8 text-white bg-primary overflow-hidden">

  <!-- Torch-style spotlight + moon + title -->
  <div class="relative w-full h-[500px] flex flex-col justify-center items-center text-center overflow-hidden">
    <div class="absolute top-0 left-1/2 transform -translate-x-1/2 w-[280px] h-[440px] z-0"
         style="background: radial-gradient(ellipse at center, #e4d6abcc 0%, #e4d6ab00 70%);
                clip-path: polygon(30% 0%, 70% 0%, 90% 100%, 10% 100%);
                filter: blur(8px);
                opacity: 0.85;">
    </div>

    <div class="z-10">
      <div class="text-[3.5rem] sm:text-[4.5rem] text-[#e4d6ab] mb-2">ðŸŒ™</div>
      <h1 class="text-4xl sm:text-5xl font-extrabold text-white">Sleep</h1>
      <div class="mt-3 sm:mt-4 text-sm sm:text-base font-medium text-white/95 max-w-md leading-relaxed">
        Upload your sleep data and habits<br>
        to formulate a sleep plan.<br>
        Create a profile to store your records.<br>
        <span class="text-white font-semibold">Based on peer reviewed research.</span>
      </div>
    </div>
  </div>

  <!-- Upload Button -->
  <div class="mt-4 z-10">
    <button onclick="toggleModal(true)" class="bg-[#e4d6ab] text-[#221f4d] font-bold text-base px-8 py-3 rounded-full shadow-md hover:bg-opacity-90 transition">
      â¬† Upload Sleep Data
    </button>
  </div>

  <!-- Modal -->
  <div id="sleepModal" class="fixed inset-0 bg-black/60 flex items-center justify-center z-50 hidden">
    <div class="bg-white rounded-2xl p-6 w-[90%] max-w-md shadow-lg relative">
      <h2 class="text-xl font-bold text-[#221f4d] mb-4">Sleep Data Entry</h2>
      <form class="space-y-4" onsubmit="handleFormSubmit(event)">
        <div>
          <label class="block text-sm font-medium text-gray-700">Date</label>
          <input type="date" class="w-full border border-gray-300 rounded-lg p-2 text-gray-900 bg-gray-100 focus:outline-none focus:ring-2 focus:ring-[#e4d6ab]">
        </div>
        <div class="flex gap-4">
          <div class="flex-1">
            <label class="block text-sm font-medium text-gray-700">Sleep Time</label>
            <input type="time" class="w-full border border-gray-300 rounded-lg p-2 text-gray-900 bg-gray-100 focus:outline-none focus:ring-2 focus:ring-[#e4d6ab]">
          </div>
          <div class="flex-1">
            <label class="block text-sm font-medium text-gray-700">Wake Time</label>
            <input type="time" class="w-full border border-gray-300 rounded-lg p-2 text-gray-900 bg-gray-100 focus:outline-none focus:ring-2 focus:ring-[#e4d6ab]">
          </div>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">
            Sleep Rating (1â€“5): <span id="ratingValue">3</span>
          </label>
          <input type="range" min="1" max="5" value="3" class="w-full"
                 oninput="document.getElementById('ratingValue').innerText = this.value">
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700">How did you feel?</label>
          <textarea rows="2" class="w-full border border-gray-300 rounded-lg p-2 text-gray-900 bg-gray-100 focus:outline-none focus:ring-2 focus:ring-[#e4d6ab]"></textarea>
        </div>
        <div class="flex justify-end space-x-2 pt-2">
          <button type="button" onclick="toggleModal(false)" class="text-sm text-gray-500 hover:underline">Cancel</button>
          <button type="submit" class="bg-[#e4d6ab] text-[#221f4d] px-4 py-2 rounded-full font-semibold hover:bg-opacity-90 transition">Save</button>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script>
  function toggleModal(show) {
    const modal = document.getElementById("sleepModal");
    if (show) {
      modal.classList.remove("hidden");
    } else {
      modal.classList.add("hidden");
    }
  }

  function handleFormSubmit(event) {
    event.preventDefault();
    alert("Sleep data saved successfully!");
    toggleModal(false);
  }
</script>
{% endblock %}
